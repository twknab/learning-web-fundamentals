!function(){"use strict";var e,t="a21da86-1467188900899",a={},s=["https://w.chatlio.com/v3/vendor/chatlio-react-0.14.7-with-addons.min.f45b6108.js"];(!window.Pusher||window.Pusher.VERSION<"2.1.0")&&s.push("https://w.chatlio.com/v3/vendor/pusher-3.0.min.5f442757.js");var i,n,o=window.localStorage,r=function(){try{var e=Date.now();return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return console.warn("localStorage is not available"),!1}};r()||(o={_data:{},setItem:function(e,t){this._data[e]=JSON.stringify(t)},getItem:function(e){return this._data.hasOwnProperty(e)?this._data[e]:null}});var l,c,h,m,p,d,u,f,g,v,w,y,S,b,E,C="function"==typeof window.html2canvas,N=!1,I="https://w.chatlio.com/v3/main.9595ccd0.css",T="https://w.chatlio.com/v3/sidebar.1151ed33.css",A=2e4,q=9e4,O=!0,U=!1,x=200,R=5,k=new Audio("https://w.chatlio.com/v3/media/water-drips-single16.7cb55185.mp3");k.volume=.8;var M,D="onpropertychange"in document&&!window.matchMedia,P={userId:void 0,traits:{}},L={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},_=/[&><"']/g,F=function(e){return L[e]},j=function(e){return e&&e.length>0?e.replace(_,F):""},V=function(e,t){var a=document.createEvent("Event");t&&(a.data=t),a.initEvent("chatlio."+e,!0,!0),y.dispatchEvent(a)},B=function(e){var t=document.createElement("div");t.id="chatlio-widget";var a=document.getElementById("chatlioWidgetPlaceholder");if(a?document.getElementById("chatlioWidgetPlaceholder").appendChild(t):document.body.appendChild(t),l=j(e.getAttribute("data-widget-id")),!l)return console.warn("Missing widget UUID. Did you set the 'data-widget-id' attribute?"),!1;h="chatlio_uuid--"+j(l),f=j(e.getAttribute("data-start-hidden"))||!1,"false"!==f&&"null"!==f||(f=!1),I=j(e.getAttribute("data-chatlio-css-src"))||I;try{m=JSON.parse(e.getAttribute("data-widget-options"))||{}}catch(s){m={}}return p=JSON.parse(e.getAttribute("data-widget-metadata")),t},W=function(){for(var e="w.chatlio-widget.js",t=document.getElementsByTagName("script"),a=0;a<t.length;a++){var s=t[a].src;if(s&&s.indexOf(e)>=0)return t[a]}return null},J={"just now":"just now","y ago":"y ago","mo ago":"m ago","d ago":"d ago","h ago":"h ago","m ago":"m ago"},H=function(e){if(isNaN(e))return"";var t,a=Math.floor((new Date-e)/1e3),s="";return a<60?J["just now"]:(s=(t=Math.floor(a/31536e3))>1?J["y ago"]:(t=Math.floor(a/2592e3))>1?J["mo ago"]:(t=Math.floor(a/86400))>1?J["d ago"]:(t=Math.floor(a/3600))>1?J["h ago"]:(t=Math.floor(a/60))>=1?J["m ago"]:"",t+s)},Z=function(e,t){var a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src",e),a.onload=t,(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(a)},Y=function(e){return e&&"object"==typeof e&&"createElement"in e&&e.version>="0.14.3"&&"__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED"in e},K=function(e){var t=e.split(".");return t.length<=2?e:t.slice(1).join(".")},z=function(){var e=h+"=;path=/;domain="+K(window.location.hostname)+";expires=Thu, 01 Jan 1970 00:00:01 GMT;";document.cookie=e},$=function(e){for(var t=e+"=",a=document.cookie.split(";"),s=0;s<a.length;s++){var i=a[s];if(i.indexOf(t)!==-1){for(;" "===i.charAt(0);)i=i.substring(1);var n=i.substring(t.length,i.length);return o.setItem(e,n),n}}return""};"undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues?M=window.crypto:"undefined"!=typeof window&&"object"==typeof window.msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&(M=window.msCrypto);var X=function(){var e=new Uint16Array(8);M.getRandomValues(e);var t=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return t(e[0])+t(e[1])+"-"+t(e[2])+"-"+t(e[3])+"-"+t(e[4])+"-"+t(e[5])+t(e[6])+t(e[7])},G=function(){var e=Date.now(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?a:3&a|8).toString(16)});return t},Q=M?X:G,ee=function(e){var t=o.getItem(h)||$(h);""===t&&(t=e||Q(),o.setItem(h,t));var a=h+"="+t+";path=/;domain="+K(window.location.hostname);return document.cookie=a,t},te=function(e){g="chatlio-"+e+"-messages",v="chatlio-"+e+"-isClosed",w="chatlio-"+e+"-provided-req-info"},ae=function(e){return e=e||{},clearTimeout(E),o.removeItem(h),z(),c=ee(e.vsUuid),o.removeItem(v),o.removeItem(w),o.removeItem(g),te(c),P={userId:void 0,traits:{}},e.messages&&e.messages.length>0&&Array.isArray(e.messages)&&o.setItem(g,JSON.stringify(e.messages)),void 0!==e.isClosed?o.setItem(v,e.isClosed):o.setItem(v,"true"),e.reqInfo&&o.setItem(w,e.reqInfo),S&&S.disconnect&&S.disconnect(),S=void 0,!0},se=function(){return"undefined"!=typeof window.define&&"undefined"!=typeof window.require},ie=function(e,t){var a=new XMLHttpRequest;if("undefined"!=typeof XDomainRequest)a=new XDomainRequest;else if(!("withCredentials"in a))throw new Error("Your browser does not support CORS. Please contact chatlio support at support@chatlio.com");return t&&""!==t||(t="GET"),a.open(t,e,!0),a},ne=function(e,t){t=t||{};var a;if("POST"===t.verb)a=ie(e,t.verb);else if(null!==t.data){var s=t.data||"vsUuid="+c+"&ceUuid="+l;a=ie(e+"?"+s)}else a=ie(e);if(a.onload=function(){if("withCredentials"in a)200===a.status?t.success&&t.success.apply(a,arguments):a.status>=400&&a.status<500?t.error&&t.error.apply(a,arguments):t.failure&&t.failure.apply(a,arguments);else{var e;try{e=JSON.parse(this.responseText)||{}}catch(s){e={}}var i;e.status&&(i=parseInt(e.status)),!e.status||"200"!==e.status&&"online"!==e.status?t.error&&e.status&&i>=400&&i<500?t.error.apply(a,arguments):t.failure&&t.failure.apply(a,arguments):t.success&&t.success.apply(a,arguments)}},a.onerror=function(){t.failure&&t.failure.apply(a,arguments)},t.timeout>0&&(a.timeout=t.timeout,t.ontimeout?a.ontimeout=function(){t.ontimeout.apply(a,arguments)}:a.ontimeout=function(){t.failure&&t.failure.apply(a,arguments)}),"POST"===t.verb){var i=JSON.stringify(t.data);a.send(i)}else a.send();return a},oe=function(){var e=o.getItem(g),t=JSON.parse(e)||[];return t},re=5,le=2,ce=function(){n=i.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var e="vsUuid="+c+"&ceUuid="+l+"&currentPage="+encodeURIComponent(window.location.href);document.referrer&&document.referrer.length>0&&location.host.length>0&&location.host!==document.referrer.split("/")[2]&&(e+=e+"&referrerURL="+encodeURIComponent(document.referrer.substring(0,240))),ne("https://api.chatlio.com/v1/p/visitor/new",{data:e,timeout:2999,success:function(){N=!0,ke(this.responseText),V("ready")},error:function(){409===this.status&&le>0&&(le--,ae({isClosed:o.getItem(v),reqInfo:o.getItem(w),messages:oe()}),ce())},failure:function(){re>0?(re--,setTimeout(ce,5003)):console.error("Oh noes! There was a problem registering the Chatlio widget '"+c+"'/'"+l+"'. Please contact Chatlio support! Status code: ",this.status)}})},he=function(){if(m.forceRequireLoad){var e=0,t=function(){se()?require(s,function(e){if(Y(e))i=e;else{if(!Y(window.ChatlioReact))return void console.warn("Forced require() loading React failed. Contact Chatlio support: support@chatlio.com");i=window.ChatlioReact}ce()}):e<10?(e++,setTimeout(t,500)):console.warn("Waiting for require() to appear. Contact Chatlio support: support@chatlio.com")};t()}else if(se()&&m.skipRequireLoad!==!0)require(s,function(e){if(Y(e))i=e;else{if(!Y(window.ChatlioReact))return void console.warn("require() loading React failed. Contact Chatlio support: support@chatlio.com");i=window.ChatlioReact}ce()});else{var a=0,n=function(){if(a++,a===s.length){if(!Y(window.ChatlioReact))return void console.warn("Loading React failed. Contact Chatlio support: support@chatlio.com");i=window.ChatlioReact,ce()}};s.forEach(function(e){Z(e,n)})}},me=function(e){var t=document.createElement("link");t.setAttribute("type","text/css"),t.setAttribute("rel","stylesheet"),t.setAttribute("href",j(e)),(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(t)},pe=function(e){var t=e||oe();return 0!==t.length},de=function(e,t){return!!e&&1e3*e.ts>Date.now()-60*t*1e3},ue=function(e,t){var a;return function(){var s=this,i=arguments,n=t&&!a;clearTimeout(a),a=setTimeout(function(){a=null,t||e.apply(s,i)},1500),n&&e.apply(s,i)}},fe=function(e){var t=o.getItem(v);return(!e||!U)&&(!(!t||"undefined"===t)&&!JSON.parse(t))},ge=function(e){if(!e||""===e)return!1;for(var t=e.split(/[\s,]/).filter(function(e){return e.replace(/\s/,"")}),a=window.location.href,s=0;s<t.length;s++){var i,n=t[s];try{i=new RegExp(n)}catch(o){console.warn("'%s' is not a valid regular expression",n);continue}if(a.match(i))return!0}return!1},ve=ue(function(){ne("https://api.chatlio.com/v1/p/visitor/"+c+"/typing",{data:null})},!0),we=function(e){ne("https://api.chatlio.com/v1/p/visitor/message/ack/"+e)},ye=function(){console.warn("Called render before initialization")},Se=function(){if(u=!1,V("offline"),a.isShown()&&b){var e=JSON.parse(b);e.connecting=!0,e.expanded=fe(),ye(e),b=JSON.stringify(e)}},be=function(){var e={authEndpoint:"https://api.chatlio.com/v1/p/visitor/auth",encrypted:!0,authTransport:D?"jsonp":"ajax",disableStats:!0};S=new Pusher("7fc2084f5bc6a21f2dfe",e),S.connection.bind("failed",function(){console.error("No native WebSockets and no working fallback (Flash, http)")}),S.connection.bind("unavailable",function(){console.warn("Connection unavailable. Reconnecting in 10 seconds."),Se()}),S.connection.bind("disconnected",function(){console.log("Disconnected."),Se()})},Ee=function(e,t,a,s,i){if(void 0===S){be();var n=S.subscribe("private-"+c);n.bind("new_message",function(t){d||_chatlio.show({expanded:!0}),we(t.ts),e(t),V("messageReceived",t)}),n.bind("user_typing",t),n.bind("service_messages",function(e){switch(e.type){case"screenshot":if(!C){var t="https://w.chatlio.com/v3/vendor/html2canvas-0.4.1.min.5330312b.js";Z(t,function(){C="function"==typeof window.html2canvas})}a(e);break;case"request-info":s(e);break;case"no-answer":i(e);break;default:console.warn("Unhandled service message type: %s",e.type)}});var o=S.subscribe("presence-"+c);o.bind("pusher:subscription_succeeded",function(){})}},Ce=function(e,t){var a={ceUuid:l,vsUuid:c,fromVisitor:c,currentPage:window.location.href,message:e,isOfflineMsg:!!t};ne("https://api.chatlio.com/v1/p/visitor/message/new",{verb:"POST",data:a,failure:function(){console.warn("There was a problem sending the message to Chatlio. Please contact Chatlio support at support@chatlio.com. Status code: ",this.status)}})},Ne=function(e,t){if(""===e)return void console.warn("No metadata");if(t||b!==e){var a=JSON.parse(e);if(p){for(var s in p)a[s]=p[s];e=JSON.stringify(a)}if(a.visitorIdentTraits&&"{}"!==a.visitorIdentTraits){var i=JSON.parse(a.visitorIdentTraits);!P.traits.email&&i.email&&(P.traits.email=i.email,o.setItem(w,!0)),!P.traits.name&&i.name&&(P.traits.name=i.name)}var n=u;u=!0;var r=oe(),l=r[r.length-1],c=Number(a.maxVisitorInactiveMins)||0;"busy"===a.status&&(c=Math.max(c,R)),!a.off&&"offline"!==a.status||de(l,c)||(u=!1),n!==u&&V(u?"online":"offline"),d&&!ge(a.blacklistedUrls)&&(a.expanded=fe(t),ye(a)),b=e}},Ie=5;a={version:function(){return{widget:t,loader:e}},vsUuid:function(){return c},messages:function(){return oe()},reset:function(e){e=e||{},Object.keys(e).length>0&&ne("https://api.chatlio.com/v1/p/reset_usage/"+l,{verb:"POST",data:e}),e.chatlioScriptTagId=e.chatlioScriptTagId||"chatlio-widget-embed";var t=document.getElementById(e.chatlioScriptTagId);return t?(ae(e),y.parentNode.removeChild(y),this.init(t),this):(console.warn("No script node with ID %s",e.chatlioScriptTagId),this)},identify:function(){var e,t={};if(Array.isArray(arguments[0])?"object"==typeof arguments[0][0]?(e=arguments[0][0][0],t=arguments[0][0][1]||{}):(e=arguments[0][0],t=arguments[0][1]||{}):(e=arguments[0],t=arguments[1]||{}),Object.keys(t).forEach(function(e){var a=t[e];void 0!==a&&null!==a?t[e]=String(a):"name"!==e&&"email"!==e||delete t[e]}),P={userId:e,traits:t},P.traits.email&&(o.setItem(w,!0),d&&b)){var a=JSON.parse(b);!a.requireInfo&&u||(a.expanded=fe(),ye(a))}return ne("https://api.chatlio.com/v1/p/visitor/identify",{data:"vsUuid="+c+"&ceUuid="+l+"&userId="+encodeURIComponent(e)+"&traits="+encodeURIComponent(JSON.stringify(t)),failure:function(){Ie>0?(setTimeout(function(){window._chatlio.identify(e,t)},A),Ie--):console.warn("Oh noes! There was a problem identifying the current user to Chatlio. Please contact Chatlio support at support@chatlio.com. Status code: ",this.status)}}),this},track:function(){return this},isShown:function(){return d},isOnline:function(){return u},show:function(e){if(e=e||{},e.hasOwnProperty("expanded")&&(V("mounted"),e.expanded===!0?o.setItem(v,"false"):e.expanded===!1&&o.setItem(v,"true")),d=!0,y.style.display="block",b){var t=JSON.parse(b);t.expanded=fe(),ye(t)}return this},hide:function(){return d=!1,y.style.display="none",this},init:function(e){return y=B(e),y&&(b=null,ce()),this},configure:function(e){return e?(Array.isArray(e)&&e[0]&&"object"==typeof e[0][0]?p=e[0][0]:(p=e,e.hasOwnProperty("timeLocale")&&(J=e.timeLocale,delete e.timeSinceStrings)),Ne(b,!0),this):(console.warn("_chatlio.configure called without data"),this)},send:function(e){Array.isArray(e)&&(e=e&&e[0]&&e[0][0]);var t=y.getElementsByTagName("TEXTAREA");if(!t||!t[0])return void console.log("[_chatlio.send] Can't send: no widget?");t=t[0],t.value=e;var a=new KeyboardEvent("keydown",{keyCode:13,bubbles:!0,cancelable:!0,detail:740});t.dispatchEvent(a)}};var Te=function(){clearTimeout(E),A<q&&(A+=1e3),E=setTimeout(Te,A),O&&ne("https://api-cdn.chatlio.com/v1/p/chat_endpoints/"+l,{data:null,failure:function(){u&&Se()},success:function(){N&&Ne(this.responseText)}})},Ae=function(){if(!window._chatlio)return void console.warn("No _chatlio object on root");var e;try{e=JSON.parse(JSON.stringify(window._chatlio))}catch(t){return void console.warn("Invalid API call: ",t)}window._chatlio=a,e&&e.length>0&&e.forEach(function(e){e.constructor!==Array&&console.warn("invalid chatlio api call: %o",e);var t=e.shift();a[t]||console.warn("unknown chatlio api call: '%s'",String(t)),a[t].call(a,e)})},qe=function(){ne("https://api.chatlio.com/v1/p/announce/"+l+"/"+c+"/"+e+"/"+t,{verb:"HEAD",data:null})},Oe=function(){if("matchMedia"in window){var e=window.matchMedia("(max-width:480px)"),t=function(e){U=!!e.matches};e.addListener(t),t(e)}},Ue=function(e,t,a){a=a||{},ne("https://api.chatlio.com/v1/p/visitor/"+e+"/event/"+t,{verb:"POST",data:a,failure:function(){console.warn("There was a problem sending the event to Chatlio. Please contact Chatlio support at support@chatlio.com. Status code: ",this.status)}})},xe="currentScript"in document?document.currentScript:W();y=B(xe),e=xe.getAttribute("data-loader-version"),c=ee(),te(c),he(),me(I),m.embedSidebar&&me(T),Z("https://w.chatlio.com/v3/vendor/emojione-1.4.1.min.2f0e13b4.js"),Oe(),qe();var Re=5,ke=function(e){i&&"createElement"in i||Re>0&&(Re--,console.warn("Chatlios React is not ready yet. Retrying."),setTimeout(ke,500)),document.addEventListener("visibilitychange",function(){document.hidden?O=!1:(O=!0,Te())});var t,a=/^(\w[\w-+]*(?:\.[\w-+]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,s=function(e){return a.test(e)},r=function(e){if(!window.emojione||0===e.length)return e;window.emojione.ascii=!0,e=window.emojione.shortnameToImage(e.replace(/:(simple_smile|slightly_smiling_face):/gim,":grinning:"));for(var t,a=e,s=/<img.*?src="([^">]*\/([^">]*?))".*?>/g,i=/<img.*?.*?>/;t=s.exec(e);){var n=t[1],o="";n=n.substr(n.lastIndexOf("/")+1).split(".")[0];for(var r in window.emojione.emojioneList)if(window.emojione.emojioneList[r].indexOf(n.toLowerCase())!==-1){o=r;break}a=a.replace(i,o)}return a},h=i.addons.CSSTransitionGroup,p="https://w.chatlio.com/v3/images/agent.fa45c4ec.png",u=i.createClass({displayName:"WidgetContainer",getInitialState:function(){var e=oe();return pe(e)&&Ee(this.onMessage,this.onTyping,this.onRequestScreenshot,this.onRequestInfo,this.onNewEvent),{uuid:c,messages:e,isFirstMsg:!0,widgetClosed:!this.props.meta.expanded,userTyping:!1,requestScreenshot:!1,requestInfo:!1}},componentWillReceiveProps:function(e){this.setState({widgetClosed:!e.meta.expanded})},widgetViewState:function(){return m.embedInline?"":this.state.widgetClosed?"closed":""},toggleWidget:function(e){o.setItem(v,JSON.stringify(!this.state.widgetClosed)),this.setState({widgetClosed:!this.state.widgetClosed}),e.stopPropagation(),V(this.state.widgetClosed?"expanded":"collapsed")},parseBody:function(e){return""===e||"undefined"==typeof e?e:r(e).replace(/(&lt;|<)(#C|@U|!).*?(&gt;|>)/gm,"").replace(/<(.*?)>/gm,function(e,t){var a=t.split("|"),s='<a target="_blank" href="'+a[0]+'">'+(a[1]||a[0])+"</a>";return s}).replace(/(```([^`]*)```)/gm,"<pre>$2</pre>").replace(/(`([^`]*)`)/gm,"<code>$2</code>")},componentDidMount:function(){V("mounted")},saveToLS:function(){o.setItem(v,JSON.stringify(this.state.widgetClosed)),o.setItem(g,JSON.stringify(this.state.messages.slice(-x)))},sendMessage:function(e){if(13===e.keyCode||void 0===e.keyCode||740===e.detail){if(e.shiftKey)return!0;e.preventDefault();var t="TEXTAREA"===e.target.nodeName?e.target:e.target.parentNode.parentNode.firstChild;t.rows=1;var a=t.value.trim();if(""===a)return!1;var s={body:this.parseBody(j(a)),author:"You",ts:(Date.now()/1e3).toString()};this.state.isFirstMsg&&(this.setState({isFirstMsg:!1}),Ee(this.onMessage,this.onTyping,this.onRequestScreenshot,this.onRequestInfo,this.handleNoAnswer),0===this.state.messages.length&&V("firstMessageSent",s)),t.value="",Ce(r(a).replace(/<(.*?)\|(.*?)>/gm,"$1 $2").replace(/<!(here|channel)>/gm,"@$1")),this.state.messages.push(s),this.setState({messages:this.state.messages}),this.saveToLS()}else(32===e.keyCode||e.keyCode>46&&e.keyCode<91||e.keyCode>95&&e.keyCode<112||e.keyCode>185&&e.keyCode<223)&&ve();return!0},onMessage:function(e){for(var t=this.state.messages.length-1,a=Math.max(0,t-5);t>=a;--t)if(this.state.messages[t].ts===e.ts){if(!e.isEdited)return;return this.state.messages[t].body=this.parseBody(e.body),this.setState({widgetClosed:!1,userTyping:!1,messages:this.state.messages}),void this.saveToLS()}k.play(),e.body=this.parseBody(e.body),this.setState({widgetClosed:!1,userTyping:!1,showOfflineForm:!1,messages:this.state.messages.concat(e)}),this.saveToLS()},isTypingTimeout:0,onTyping:function(e){clearTimeout(this.isTypingTimeout),this.setState({userTyping:e});var t=this;this.isTypingTimeout=setTimeout(function(){t.setState({userTyping:!1})},6e3)},onRequestScreenshot:function(){clearTimeout(this.isTypingTimeout),this.setState({userTyping:!1,requestScreenshot:{dismiss:this.onDismissScreenshot,send:this.onSendScreenshot}}),k.play()},handleNoAnswer:function(e){this.props.meta[e.key]&&(e.data=j(this.props.meta[e.key])),this.state.messages.push({body:e.data,author:"Them",ts:(Date.now()/1e3).toString()}),this.setState({messages:this.state.messages,requestInfo:!1}),this.saveToLS(),k.play()},onShowOfflineForm:function(){this.setState({showingOfflineForm:!0})},onSendScreenshot:function(){if(Ue(c,"client-screenshot-sending"),"function"!=typeof window.html2canvas)return void console.warn("Screenshot library is not ready yet. Try again in a short while.");var e=this,t={onrendered:function(t){e.setState({requestScreenshot:!1}),ne("https://api.chatlio.com/v1/p/visitor/screenshot",{verb:"POST",data:{image:t.toDataURL("image/png"),vsUuid:c,ceUuid:l},success:function(){e.state.messages.push({body:e.parseBody("✅"),author:"You",ts:(Date.now()/1e3).toString()}),e.setState({messages:e.state.messages})},onerror:function(){console.warn("There was a problem sending your screenshot to Chatlio. Please contact Chatlio support at support@chatlio.com. Status code: ",this.status)}})}};0===window.pageYOffset&&(t.width=window.innerWidth,t.height=window.innerHeight),window.html2canvas(document.body,t)},onDismissScreenshot:function(){Ue(c,"client-screenshot-declined"),this.setState({requestScreenshot:!1})},onRequestInfo:function(e){clearTimeout(this.isTypingTimeout);var t=e.data.split("|");this.state.requestInfo={dismiss:this.onDismissRequestInfo,send:this.onSendRequestInfo,fields:t},this.state.userTyping=!1,this.setState(this.state),k.play()},onDismissRequestInfo:function(){Ue(c,"client-request-info-declined"),this.setState({requestInfo:!1})},onSendRequestInfo:function(e){Ue(c,"client-request-info-sending",e),this.state.messages.push({body:this.parseBody("✅"),author:"You",ts:(Date.now()/1e3).toString()}),this.setState({messages:this.state.messages,requestInfo:!1})},render:function(){return i.createElement(S,{meta:this.props.meta,requireInfo:this.props.meta.requireInfo,messages:this.state.messages,toggleWidget:this.toggleWidget,widgetViewState:this.widgetViewState(),sendMessage:this.sendMessage,userTyping:this.state.userTyping,requestScreenshot:this.state.requestScreenshot,onShowOfflineForm:this.onShowOfflineForm,showingOfflineForm:this.state.showingOfflineForm,requestInfo:this.state.requestInfo})}}),S=i.createClass({displayName:"WidgetChrome",getInitialState:function(){return{dropZoneClass:""}},isOffline:function(){if(this.props.showingOfflineForm)return!0;var e=Number(this.props.meta.maxVisitorInactiveMins);return"busy"===this.props.meta.status?(e=Math.max(e,R),!de(this.props.messages[this.props.messages.length-1],e)):!de(this.props.messages[this.props.messages.length-1],e)&&!(!this.props.meta.off&&"offline"!==this.props.meta.status)},abortRender:function(){return!this.props.meta||!(!this.isOffline()||!this.props.meta.hideWhenOffline)},showDropZone:function(){this.setState({dropZoneClass:" chatlio-drag-over"})},hideDropZone:function(){this.setState({dropZoneClass:""})},toggleWidget:function(e){this.refs.closeControl.contains(e.target)&&V("closed"),this.props.toggleWidget(e)},fetchAuthorInfoFromHistory:function(){var e={name:void 0,avatarUrl:void 0};if(this.props.messages.length>=1&&new Date(1e3*this.props.messages[this.props.messages.length-1].ts)>Date.now()-9e5)for(var t=this.props.messages.length;t--;)if("You"!==this.props.messages[t].author){"Them"!==this.props.messages[t].author&&(e.name=this.props.messages[t].author);var a=this.props.messages[t].avatarUrl;if(a&&a.length>1){e.avatarUrl=this.props.messages[t].avatarUrl;break}}return e},render:function(){if(this.abortRender())return null;var e=this.isOffline(),t={backgroundColor:this.props.meta.titleColor},a={color:this.props.meta.titleFontColor},s="chatlio-widget "+this.props.widgetViewState+this.state.dropZoneClass;if(e===!0&&(s+=" offline"),m.embedInline===!0){s+=" embed-inline";var n=document.getElementById("chatlio-widget");n.className=n.className+" embed-inline-container"}var o,r=e?this.props.meta.offlineTitle:this.props.meta.onlineTitle,l=e?this.props.meta.offlineTitle:this.props.meta.agentLabel;if(this.props.meta.teamAvatarOn&&this.props.meta.teamAvatarUrl)o=i.createElement("div",{className:"chatlio-title-avatar-container"},i.createElement("img",{src:this.props.meta.teamAvatarUrl})),this.props.meta.forwardSlackUserName&&(p=this.fetchAuthorInfoFromHistory(),p.name&&(l=p.name));else if(this.props.meta.forwardSlackUserName&&!this.isOffline()){var c="";this.props.meta.showAvatarPreChat?this.props.meta.activeAgentAvatar&&(c=this.props.meta.activeAgentAvatar):this.props.meta.teamAvatarUrl&&(c=this.props.meta.teamAvatarUrl);var p=this.fetchAuthorInfoFromHistory();p.name&&(l=p.name),p.avatarUrl&&(c=p.avatarUrl),c.length>1&&(o=i.createElement("div",{className:"chatlio-title-avatar-container"},i.createElement("img",{src:c})))}return i.createElement("div",{className:s},i.createElement(h,{transitionName:"flag-slide-out",transitionAppear:"closed"===this.props.widgetViewState,transitionEnterTimeout:5e3,transitionLeaveTimeout:5e3,transitionAppearTimeout:5e3},i.createElement("div",{className:"chatlio-title-bar",style:t,onClick:this.toggleWidget},i.createElement("span",{className:"chatlio-icon-chevron-up chatlio-up-arrow "+this.props.widgetViewState,style:a}),i.createElement("span",{className:"chatlio-title-text"},i.createElement("a",{style:a,onClick:this.toggleWidget},"closed"===this.props.widgetViewState?r:l,o,i.createElement("span",{className:e?"chatlio-online-dot chatlio-hide":"chatlio-online-dot"},"●"))),i.createElement("div",{ref:"closeControl",className:"chatlio-controls-close "+this.props.widgetViewState,style:a},i.createElement("span",{className:"chatlio-icon-minus "+this.props.widgetViewState}),i.createElement("span",{className:"chatlio-icon-cross2"+this.props.widgetViewState})),i.createElement("div",{className:"chatlio-widget-menu-items chatlio-hide"},i.createElement("table",{className:"chatlio-widget-menu-items-table"},i.createElement("tbody",null,i.createElement("tr",{className:"chatlio-widget-menu-icons"},i.createElement("td",null,i.createElement("span",{className:"chatlio-icon-envelope"})),i.createElement("td",null,i.createElement("span",{className:"chatlio-icon-mute"})),i.createElement("td",null,i.createElement("span",{className:"chatlio-icon-cross-circle"}))),i.createElement("tr",null,i.createElement("td",null,"Email"),i.createElement("td",null,"Mute"),i.createElement("td",null,"End Chat")))))),i.createElement(N,{meta:this.props.meta,messages:this.props.messages,widgetViewState:this.props.widgetViewState,sendMessage:this.props.sendMessage,userTyping:this.props.userTyping,showDropZone:this.showDropZone,hideDropZone:this.hideDropZone,isOffline:e,requestScreenshot:this.props.requestScreenshot,onShowOfflineForm:this.props.onShowOfflineForm,requestInfo:this.props.requestInfo}),this.props.meta.whiteLabel?"":i.createElement(b,{isOffline:e})))}}),b=i.createClass({displayName:"PoweredBy",render:function(){var e="chatlio-powered-by";return this.props.isOffline&&(e+=" chatlio-powered-by-offline"),i.createElement("div",{className:"chatlio-clear"},i.createElement("div",{className:e},"Powered by ",i.createElement("a",{target:"_blank",href:"https://chatlio.com"},"Chatlio")))}}),C=i.createClass({displayName:"EnterInfo",getInitialState:function(){return{email:"",name:"",emailError:!1}},sendRequiredInfo:function(){o.setItem(w,!0),window._chatlio.identify(P.userId,{email:this.state.email,name:this.state.name}),this.props.enteredRequiredInfo()},handleChange:function(e){var t=this.state||{};t[e.target.name]=e.target.value,this.isValidInput(t)?t.emailError=!1:t.emailError=!0,this.setState(t)},handleKeyDown:function(e){if(this.isValidInput(this.state)&&13===e.keyCode)return void this.sendRequiredInfo()},isValidInput:function(e){return!e.hasOwnProperty("email")||(""===e.email||s(e.email))},render:function(){return i.createElement("div",{className:"chatlio-widget-body "+this.props.widgetViewState},i.createElement("div",null,i.createElement("div",{className:"chatlio-offline-message-container"},i.createElement("p",{className:"chatlio-missed-you-message"},this.props.meta.requireInfoGreeting),i.createElement("input",{type:"text",name:"email",onKeyDown:this.handleKeyDown,onChange:this.handleChange,className:this.state.emailError?"error":"",placeholder:this.props.meta.offlineEmailPlaceholder}),i.createElement("input",{type:"text",name:"name",onKeyDown:this.handleKeyDown,onChange:this.handleChange,placeholder:this.props.meta.offlineNamePlaceholder}),i.createElement("button",{className:"chatlio-btn",onClick:this.sendRequiredInfo,disabled:this.state.emailError||""===this.state.email},this.props.meta.requireInfoSubmitBtn))))}}),N=i.createClass({displayName:"ChatWidget",requireInfoState:function(e){var t=JSON.parse(o.getItem(w));return{requireInfo:e.requireInfo&&!t}},getInitialState:function(){return this.requireInfoState(this.props.meta)},componentWillReceiveProps:function(e){this.setState(this.requireInfoState(e.meta))},enteredRequiredInfo:function(){setTimeout(function(){this.setState({requireInfo:!1})}.bind(this),500)},render:function(){return this.props.isOffline?i.createElement(M,{meta:this.props.meta,sendMessage:this.props.sendMessage,messages:this.props.messages,widgetViewState:this.props.widgetViewState}):this.state.requireInfo?i.createElement(C,{meta:this.props.meta,enteredRequiredInfo:this.enteredRequiredInfo,widgetViewState:this.props.widgetViewState}):i.createElement(U,{sendMessage:this.props.sendMessage,messages:this.props.messages,widgetViewState:this.props.widgetViewState,userTyping:this.props.userTyping,showDropZone:this.props.showDropZone,hideDropZone:this.props.hideDropZone,requestScreenshot:this.props.requestScreenshot,requestInfo:this.props.requestInfo,onShowOfflineForm:this.props.onShowOfflineForm,meta:this.props.meta})}}),I=i.createClass({displayName:"RequestScreenshot",render:function(){return this.props.screenshot?i.createElement("div",{className:"chatlio-inline-dialog chatlio-screenshot-request"},i.createElement("p",null,this.props.text),i.createElement("div",null,i.createElement("button",{onClick:this.props.screenshot.dismiss,className:"chatlio-btn chatlio-btn-dismiss"},this.props.declineLabel),i.createElement("button",{onClick:this.props.screenshot.send,className:"chatlio-btn chatlio-btn-send"},this.props.allowLabel))):null}}),T=i.createClass({displayName:"RequestInfo",handleChange:function(e){var t=this.state||{};t[e.target.name]=e.target.value,this.setState(t)},handleKeyDown:function(e){if(13===e.keyCode)return void this.sendRequestInfo()},sendRequestInfo:function(){var e=!1;for(var t in this.state)if(this.state.hasOwnProperty(t)){e=!0;break}e&&(window._chatlio.identify(P.userId,this.state),this.props.requestInfo.send(this.state),setTimeout(function(){this.replaceState({})}.bind(this),0))},titleCaseize:function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()},render:function(){if(!this.props.requestInfo)return null;var e=this;return i.createElement("div",{className:"chatlio-inline-dialog "},this.props.requestInfo.fields.map(function(t){var a=t.toLowerCase().trim().replace(/&/g,"-and-").replace(/[\s\W-]+/g,"-").replace(/-$/,""),s=t.replace(/\w\S*/g,e.titleCaseize);return i.createElement("input",{name:a,placeholder:s,onChange:e.handleChange,onKeyDown:e.handleKeyDown,type:"text"})}),i.createElement("div",null,i.createElement("button",{onClick:this.props.requestInfo.dismiss,className:"chatlio-btn chatlio-btn chatlio-btn-dismiss"},this.props.denyLabel),i.createElement("button",{onClick:this.sendRequestInfo,className:"chatlio-btn chatlio-btn chatlio-btn-send"},this.props.sendLabel)))}}),q=i.createClass({displayName:"MessageInput",getInitialState:function(){return{renderSubmit:!1,submitEnabled:!1}},mq:void 0,mqHandler:function(e){var t=!1;e.matches&&(t=!0),this.setState({renderSubmit:t})},componentDidMount:function(){"matchMedia"in window&&(this.mq=window.matchMedia("(max-width:480px)"),this.mq.matches&&this.mqHandler(this.mq),this.mq.addListener(this.mqHandler))},componentWillUnmount:function(){this.mq&&"matchMedia"in window&&this.mq.removeListener(this.mqHandler)},propTypes:{minRows:i.PropTypes.number.isRequired,maxRows:i.PropTypes.number.isRequired},resizeTextArea:function(){for(var e=this.refs.ta;e.rows>this.props.minRows&&e.scrollHeight<=e.offsetHeight;)e.rows--;if(!(e.rows>=this.props.maxRows))for(var t=0;e.scrollHeight>e.offsetHeight&&t!==e.offsetHeight;)t=e.offsetHeight,e.rows++},handleFocus:function(){this.mq&&this.mq.matches&&!m.embedInline&&(document.body.className.indexOf(" chatlio-freeze-content")!==-1?document.body.className=document.body.className.replace(" chatlio-freeze-content",""):document.body.className=document.body.className+" chatlio-freeze-content")},onChange:function(e){e.target.value.length>0?this.setState({submitEnabled:!0}):this.setState({submitEnabled:!1})},onClick:function(e){this.setState({submitEnabled:!1}),this.props.sendMessage(e)},render:function(){if(this.props.connecting)return i.createElement("div",{className:"chatlio-new-message-container"},i.createElement("textarea",{rows:"1",className:"chatlio-new-message chatlio-connecting",disabled:"true",placeholder:"Connecting to Chatlio. Please wait..."}));var e,t="chatlio-new-message-container",a="chatlio-new-message";if(this.props.whiteLabel===!0&&(t+=" chatlio-white-label"),this.state.renderSubmit){var s="chatlio-btn-send";this.state.submitEnabled||(s+=" chatlio-btn-send-disabled"),e=i.createElement("div",{className:"chatlio-btn-container"},i.createElement("a",{onClick:this.onClick,className:s},this.props.defaultSendBtnLabel)),t="chatlio-new-message-container-small",a="chatlio-new-message-small"}return i.createElement("div",{
className:t},i.createElement("textarea",{ref:"ta",rows:this.props.minRows,onKeyDown:this.props.sendMessage,onKeyUp:this.resizeTextArea,onChange:this.onChange,onFocus:this.handleFocus,onBlur:this.handleFocus,className:a,placeholder:this.props.placeholder}),e)}}),U=i.createClass({displayName:"ChatWidgetOnline",getInitialState:function(){return{fileUploading:!1}},dragenter:function(e){clearTimeout(t),this.props.showDropZone(),e.stopPropagation(),e.preventDefault()},dragover:function(e){clearTimeout(t),e.stopPropagation(),e.preventDefault()},dragleave:function(e){var a=this;clearTimeout(t),t=setTimeout(function(){a.props.hideDropZone()},100),e.stopPropagation(),e.preventDefault()},drop:function(e){this.props.hideDropZone(),e.stopPropagation(),e.preventDefault(),this.setState({fileUploading:!0,fileUploadProgress:0});var t=e.dataTransfer,a=t.files,s=this;if(a&&a.length>=1){var i=new XMLHttpRequest;i.upload.addEventListener("progress",function(e){var t=parseInt(e.loaded/e.total*100);s.setState({fileUploadProgress:t})},!1);var n=new FormData,o="https://api.chatlio.com/v1/p/visitor/upload";n.append("file",a[0]),n.append("vsUuid",c),i.open("POST",o,!0),i.onreadystatechange=function(){4===i.readyState&&200===i.status?s.setState({fileUploading:!1,fileUploadProgress:0}):0===i.status&&s.setState({fileUploading:!1,fileUploadProgress:-1})},i.send(n)}},render:function(){return i.createElement("div",{className:"chatlio-widget-body "+this.props.widgetViewState,onDragEnter:this.dragenter,onDragOver:this.dragover,onDrop:this.drop,onDragLeave:this.dragleave},i.createElement(L,{messages:this.props.messages,meta:this.props.meta,requestScreenshot:this.props.requestScreenshot,onShowOfflineForm:this.props.onShowOfflineForm,requestInfo:this.props.requestInfo,userTyping:this.props.userTyping,fileUploading:this.state.fileUploading,fileUploadProgress:this.state.fileUploadProgress}),i.createElement(q,{minRows:1,maxRows:5,whiteLabel:this.props.meta.whiteLabel,connecting:this.props.meta.connecting,defaultSendBtnLabel:this.props.meta.defaultSendBtnLabel,sendMessage:this.props.sendMessage,placeholder:this.props.meta.onlineMessagePlaceholder}))}}),M=i.createClass({displayName:"ChatWidgetOffline",getInitialState:function(){return{email:P.traits.email||"",name:P.traits.name||"",message:"",locked:!1}},componentWillReceiveProps:function(){this.state.locked||(P.traits.email&&P.traits.email.length>1&&this.setState({email:P.traits.email,emailError:!1}),P.traits.name&&P.traits.name.length>1&&this.setState({name:P.traits.name,nameError:!1}))},handleChange:function(e){var t={};t[e.target.name]=e.target.value,!s(this.state.email)&&this.state.email&&0!==this.state.email.length||(t.emailError=!1),this.state.message.length>0&&(t.messageError=!1),(t.email&&t.email.length>1||t.name&&t.name.length>1)&&(t.locked=!0),this.setState(t)},sendOfflineMsg:function(){this.setState({emailError:!1,messageError:!1}),s(this.state.email)||this.setState({emailError:!0}),this.state.message.length<1&&this.setState({messageError:!0}),!s(this.state.email)||this.state.message.length<1||(this.setState({offlineMessageSent:!0}),Ce([this.state.name,this.state.email,this.state.message].join("\n"),!0))},render:function(){return i.createElement("div",{className:"chatlio-widget-body "+this.props.widgetViewState},i.createElement("div",null,this.state.offlineMessageSent?i.createElement("div",{className:"chatlio-offline-message-container-sent"},i.createElement("div",null,this.props.meta.offlineThankYouMessage)):i.createElement("div",{className:"chatlio-offline-message-container"},i.createElement("p",{className:"chatlio-missed-you-message"},this.props.meta.offlineGreeting),i.createElement("input",{name:"email",value:this.state.email,type:"text",onChange:this.handleChange,className:this.state.emailError?"error":"",placeholder:this.props.meta.offlineEmailPlaceholder}),i.createElement("textarea",{name:"message",className:this.state.messageError?"error":"",rows:"3",onChange:this.handleChange,placeholder:this.props.meta.offlineMessagePlaceholder}),i.createElement("input",{name:"name",type:"text",value:this.state.name,onChange:this.handleChange,placeholder:this.props.meta.offlineNamePlaceholder}),i.createElement("button",{className:"chatlio-btn",onClick:this.sendOfflineMsg},this.props.meta.offlineSendButton))))}}),D=i.createClass({displayName:"FileUpload",render:function(){return this.props.fileUploadProgress===-1?i.createElement("div",{className:"chatlio-file-upload-progress"},"File upload failed, file too big?"):i.createElement("div",null,this.props.fileUploading?i.createElement("div",{className:"chatlio-file-upload-progress"},i.createElement("progress",{max:100,value:this.props.fileUploadProgress})):"")}}),L=i.createClass({displayName:"ChatMessages",scrollToBottom:function(){var e=n.findDOMNode(this);e.scrollTop=e.scrollHeight},mediaquery:void 0,componentDidMount:function(){this.scrollToBottom(),"matchMedia"in window&&(this.mediaquery=window.matchMedia("(max-width:480px)"),this.mediaquery.addListener(this.scrollToBottom))},componentDidUpdate:function(){this.scrollToBottom()},componentWillUnmount:function(){this.mediaquery&&"matchMedia"in window&&this.mediaquery.removeListener(this.scrollToBottom)},headerMsg:function(){return{body:this.props.meta.autoResponseMessage,author:this.props.meta.agentLabel}},render:function(){var e,t=this,a=!0,s=!1;this.props.messages.length>0&&(a="You"===this.props.messages[this.props.messages.length-1].author);var n="chatlio-message-container";return this.props.meta.whiteLabel&&(n+=" chatlio-white-label"),i.createElement("div",{id:"chatlio-message-container",className:n},i.createElement("div",{className:"chatlio-message-scrollable"},i.createElement("span",null,i.createElement(B,{msg:this.headerMsg(),teamAvatarOn:this.props.meta.teamAvatarOn,teamAvatarUrl:this.props.meta.teamAvatarUrl,showSlackAvatar:this.props.meta.forwardSlackUserName,showAvatarPreChat:this.props.meta.showAvatarPreChat,showTeamAvatarPreChat:this.props.meta.showTeamAvatarPreChat,needAvatar:!0,threadEnd:!1})),this.props.messages.map(function(a,n){if(e="You"!==a.author,s=!1,n>0){var o=t.props.messages[n-1];"You"!==a.author&&o.author!==a.author||(e=!1),t.props.messages[n+1]&&t.props.messages[n+1].author!==t.props.messages[n].author&&(s=!0)}return a.attachedFile?i.createElement(W,{teamAvatarOn:t.props.meta.teamAvatarOn,teamAvatarUrl:t.props.meta.teamAvatarUrl,showSlackAvatar:t.props.meta.forwardSlackUserName,attachedFile:a.attachedFile,needAvatar:e,msg:a,browserSideAuthorLabel:t.props.meta.browserSideAuthorLabel,key:n}):i.createElement(B,{msg:a,needAvatar:e,threadEnd:s,teamAvatarOn:t.props.meta.teamAvatarOn,teamAvatarUrl:t.props.meta.teamAvatarUrl,showSlackAvatar:t.props.meta.forwardSlackUserName,browserSideAuthorLabel:t.props.meta.browserSideAuthorLabel,key:n})}),i.createElement(_,{msg:this.headerMsg(),userTyping:this.props.userTyping,needAvatar:a,showSlackAvatar:this.props.meta.forwardSlackUserName,teamAvatarOn:this.props.meta.teamAvatarOn,teamAvatarUrl:this.props.meta.teamAvatarUrl}),i.createElement(I,{screenshot:this.props.requestScreenshot,text:this.props.meta.requestScreenshotText,allowLabel:this.props.meta.requestScreenshotAllowLabel,declineLabel:this.props.meta.requestScreenshotDeclineLabel}),i.createElement(T,{requestInfo:this.props.requestInfo,sendLabel:this.props.meta.defaultSendBtnLabel,denyLabel:this.props.meta.defaultCancelBtnLabel}),i.createElement(D,{fileUploading:this.props.fileUploading,fileUploadProgress:this.props.fileUploadProgress})))}}),_=i.createClass({displayName:"TypingIndicator",render:function(){if(!this.props.userTyping)return null;if(this.props.needAvatar){var e;return this.props.teamAvatarOn&&this.props.teamAvatarUrl?e=i.createElement("img",{src:this.props.teamAvatarUrl}):this.props.msg&&this.props.msg.avatarUrl&&this.props.msg.avatarUrl.length>5&&this.props.showSlackAvatar?e=i.createElement("img",{src:this.props.msg.avatarUrl}):"You"!==this.props.msg.author&&(e=i.createElement("img",{src:p})),i.createElement("div",{className:"chatlio-message chatlio-clear"},i.createElement("div",{className:"chatlio-message-header"},i.createElement("div",{className:"chatlio-message-avatar"},e),i.createElement("div",{className:"typing-indicator chatlio-clear"},i.createElement("span",null),i.createElement("span",null),i.createElement("span",null))))}return i.createElement("div",{className:"chatlio-message chatlio-clear"},i.createElement("div",{className:"chatlio-message-content"},i.createElement("div",{className:"typing-indicator"},i.createElement("span",null),i.createElement("span",null),i.createElement("span",null))))}}),F=i.createClass({displayName:"ChatMessageHeader",render:function(){var e;return this.props.teamAvatarOn?e=this.props.teamAvatarUrl?i.createElement("img",{src:this.props.teamAvatarUrl}):i.createElement("img",{src:p}):this.props.msg&&this.props.msg.avatarUrl&&this.props.msg.avatarUrl.length>5&&this.props.showSlackAvatar?e=i.createElement("img",{src:this.props.msg.avatarUrl}):"You"!==this.props.msg.author&&(e=this.props.showTeamAvatarPreChat&&this.props.teamAvatarUrl?i.createElement("img",{src:this.props.teamAvatarUrl}):i.createElement("img",{src:p})),i.createElement("div",{className:"chatlio-message-header"},i.createElement("div",{className:"chatlio-message-avatar"},e))}}),B=i.createClass({displayName:"ChatMessage",render:function(){var e=this.props.msg.body||"";window.emojione&&(window.emojione.ascii=!0,e=window.emojione.shortnameToImage(e));var t=1e3*this.props.msg.ts>Date.now()-500,a="chatlio-message chatlio-message-";a+="You"===this.props.msg.author?"from-me":"from-them";var s="chatlio-message-content";return e.indexOf("<pre>")>-1?(e=e.replace(/<br\/>/gm,""),s+=" chatlio-message-content-code"):e=e.replace(/\n/gm,"\n<br/>"),i.createElement("div",{className:a},this.props.needAvatar?i.createElement(F,{msg:this.props.msg,teamAvatarOn:this.props.teamAvatarOn,teamAvatarUrl:this.props.teamAvatarUrl,showSlackAvatar:this.props.showSlackAvatar,showAvatarPreChat:this.props.showAvatarPreChat,showTeamAvatarPreChat:this.props.showTeamAvatarPreChat,browserSideAuthorLabel:this.props.browserSideAuthorLabel}):null,i.createElement("div",{className:s},i.createElement(h,{transitionName:"chatlio-fade-in-message-body",transitionAppear:t,transitionEnterTimeout:5e3,transitionLeaveTimeout:5e3,transitionAppearTimeout:5e3},this.props.msg.bodyComponent?i.createElement("span",{className:"chatlio-message-body"},this.props.msg.bodyComponent):i.createElement("span",{className:"chatlio-message-body",dangerouslySetInnerHTML:{__html:e}}))),this.props.threadEnd?i.createElement("div",{className:"chatlio-message-timestamp"},H(1e3*this.props.msg.ts)):"")}}),W=i.createClass({displayName:"AttachedFile",render:function(){var e=this.props.attachedFile.thumb360?i.createElement("img",{className:"chatlio-file-attachment",src:this.props.attachedFile.thumb360}):"";return i.createElement("div",{className:"chatlio-message chatlio-message-from-them chatlio-clear"},this.props.needAvatar?i.createElement(F,{teamAvatarOn:this.props.teamAvatarOn,teamAvatarUrl:this.props.teamAvatarUrl,showSlackAvatar:this.props.showSlackAvatar,msg:this.props.msg,browserSideAuthorLabel:this.props.browserSideAuthorLabel}):"",i.createElement("div",{className:"chatlio-message-content"},i.createElement("a",{href:this.props.attachedFile.url,target:"_blank"},e,i.createElement("div",{className:"chatlio-clear"}),i.createElement("div",{className:"chatlio-file-attachment-title"},this.props.attachedFile.title))))}});ye=function(e){n.render(i.createElement(u,{meta:e}),y)},d=!f,Ne(e,!0),E=setTimeout(Te,A),Ae()}}();